<ion-header>
  <ion-toolbar>
    <ion-title>Nueva Contraseña</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
  <div class="container">
    <form [formGroup]="recoveryForm" (ngSubmit)="onSubmit()">
      <!-- Campo Usuario -->
      <ion-item>
        <ion-label position="floating">Usuario</ion-label>
        <ion-input formControlName="username" type="text"></ion-input>
      </ion-item>
      <ion-text color="danger" *ngIf="recoveryForm.get('username')?.touched && recoveryForm.get('username')?.invalid">
        <p>El campo Usuario es obligatorio.</p>
      </ion-text>

      <!-- Campo Nueva Contraseña -->
      <ion-item>
        <ion-label position="floating">Nueva Contraseña</ion-label>
        <ion-input formControlName="newPassword" [type]="showPassword ? 'text' : 'password'"></ion-input>
        <ion-icon
          [name]="showPassword ? 'eye-off' : 'eye'"
          slot="end"
          (click)="togglePassword()"
          class="password-toggle"
        ></ion-icon>
      </ion-item>
      <ion-text color="danger" *ngIf="recoveryForm.get('newPassword')?.touched && recoveryForm.get('newPassword')?.invalid">
        <p>La nueva contraseña es obligatoria y debe tener al menos 4 caracteres.</p>
      </ion-text>

      <!-- Botón Recuperar -->
      <ion-button expand="block" class="btn-recuperar" color="warning" type="submit" [disabled]="recoveryForm.invalid">
        Recuperar
      </ion-button>

      <!-- Mensaje de éxito -->
      <ion-text color="success" *ngIf="successMessage">
        <p>{{ successMessage }}</p>
      </ion-text>
    </form>
  </div>
</ion-content>